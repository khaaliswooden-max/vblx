<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Transformation Readiness Assessment | Visionblox</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #0f172a; min-height: 100vh; color: #e2e8f0; }
        .container { max-width: 540px; margin: 0 auto; padding: 24px 16px; }
        .badge { display: inline-flex; align-items: center; gap: 8px; padding: 8px 16px; background: rgba(59,130,246,0.1); border: 1px solid rgba(59,130,246,0.3); border-radius: 9999px; color: #60a5fa; font-size: 14px; margin-bottom: 20px; }
        .badge-success { background: rgba(34,197,94,0.1); border-color: rgba(34,197,94,0.3); color: #4ade80; }
        h1 { font-size: 28px; font-weight: 700; margin-bottom: 12px; color: #fff; }
        h2 { font-size: 20px; font-weight: 700; margin-bottom: 8px; color: #fff; }
        h3 { font-size: 16px; font-weight: 600; margin-bottom: 12px; color: #fff; }
        .subtitle { font-size: 18px; color: #94a3b8; margin-bottom: 12px; }
        .desc { color: #64748b; margin-bottom: 24px; font-size: 14px; line-height: 1.5; }
        .text-center { text-align: center; }
        .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; max-width: 320px; margin: 0 auto 24px; }
        .stat-box { background: #1e293b; padding: 16px 12px; border-radius: 8px; text-align: center; }
        .stat-val { font-size: 28px; font-weight: 700; color: #60a5fa; }
        .stat-label { font-size: 12px; color: #64748b; margin-top: 4px; }
        .btn { padding: 14px 32px; background: #2563eb; color: #fff; border: none; border-radius: 8px; font-size: 15px; font-weight: 600; cursor: pointer; transition: background 0.2s; }
        .btn:hover { background: #1d4ed8; }
        .btn:disabled { opacity: 0.6; cursor: not-allowed; }
        .btn-block { width: 100%; }
        .btn-back { padding: 12px 20px; background: transparent; color: #94a3b8; border: none; cursor: pointer; font-size: 14px; }
        .btn-back:hover { color: #fff; }
        .progress-wrap { margin-bottom: 24px; }
        .progress-info { display: flex; justify-content: space-between; font-size: 12px; color: #64748b; margin-bottom: 6px; }
        .progress-bar { height: 6px; background: #1e293b; border-radius: 3px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #3b82f6, #8b5cf6); border-radius: 3px; transition: width 0.3s; }
        .question-text { color: #94a3b8; margin-bottom: 20px; font-size: 15px; }
        .options { display: flex; flex-direction: column; gap: 10px; }
        .option { padding: 14px 16px; background: #1e293b; border: 2px solid transparent; border-radius: 10px; cursor: pointer; transition: all 0.2s; }
        .option:hover { border-color: #334155; background: #263043; }
        .option.selected { background: rgba(59,130,246,0.15); border-color: #3b82f6; }
        .option-label { font-weight: 600; color: #fff; font-size: 14px; }
        .option-desc { font-size: 12px; color: #64748b; margin-top: 4px; }
        .multi-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .slider-box { background: #1e293b; border-radius: 12px; padding: 28px 24px; }
        .slider-value { font-size: 48px; font-weight: 700; color: #60a5fa; text-align: center; }
        .slider-label { color: #94a3b8; font-size: 14px; text-align: center; margin: 8px 0 20px; min-height: 20px; }
        .slider { width: 100%; height: 8px; border-radius: 4px; background: #334155; -webkit-appearance: none; appearance: none; cursor: pointer; }
        .slider::-webkit-slider-thumb { -webkit-appearance: none; width: 24px; height: 24px; border-radius: 50%; background: #3b82f6; cursor: pointer; border: 3px solid #1e293b; }
        .slider-labels { display: flex; justify-content: space-between; font-size: 12px; color: #64748b; margin-top: 12px; }
        .nav { display: flex; justify-content: space-between; margin-top: 28px; }
        .form-box { background: rgba(255,255,255,0.03); border: 1px solid #1e293b; border-radius: 16px; padding: 28px 24px; }
        .form-icon { width: 72px; height: 72px; background: linear-gradient(135deg, #3b82f6, #8b5cf6); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 36px; }
        .form-title { font-size: 22px; font-weight: 700; color: #fff; margin-bottom: 8px; text-align: center; }
        .form-desc { color: #94a3b8; font-size: 14px; text-align: center; margin-bottom: 24px; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 14px; }
        .form-group { display: flex; flex-direction: column; margin-bottom: 14px; }
        .form-label { font-size: 12px; font-weight: 600; color: #94a3b8; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px; }
        .form-input { padding: 14px; border-radius: 8px; border: 1px solid #334155; background: #1e293b; color: #fff; font-size: 14px; transition: border-color 0.2s; }
        .form-input:focus { outline: none; border-color: #3b82f6; }
        .form-input::placeholder { color: #64748b; }
        .secure-note { text-align: center; font-size: 12px; color: #64748b; margin-top: 16px; }
        .results-box { background: #1e293b; border-radius: 12px; padding: 20px; margin-bottom: 16px; }
        .bar-wrap { margin-bottom: 12px; }
        .bar-info { display: flex; justify-content: space-between; font-size: 13px; margin-bottom: 6px; }
        .bar-name { color: #e2e8f0; }
        .bar-pct { color: #64748b; }
        .bar-bg { height: 8px; background: #334155; border-radius: 4px; overflow: hidden; }
        .bar-fill { height: 100%; border-radius: 4px; transition: width 0.5s; }
        .metrics-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px; }
        .metric-box { background: #1e293b; border-radius: 10px; padding: 16px 12px; text-align: center; }
        .metric-label { font-size: 11px; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px; }
        .metric-value { font-weight: 700; font-size: 14px; margin-top: 4px; }
        .rec-box { background: #1e293b; border-radius: 10px; padding: 14px 16px; margin-bottom: 10px; }
        .rec-header { display: flex; align-items: center; gap: 10px; margin-bottom: 6px; }
        .rec-name { font-weight: 600; color: #fff; font-size: 14px; }
        .rec-badge { padding: 3px 8px; background: rgba(59,130,246,0.2); color: #60a5fa; font-size: 11px; border-radius: 4px; font-weight: 600; }
        .rec-desc { font-size: 13px; color: #94a3b8; line-height: 1.4; }
        .cta-box { background: linear-gradient(135deg, rgba(59,130,246,0.15), rgba(139,92,246,0.1)); border: 1px solid rgba(59,130,246,0.3); border-radius: 12px; padding: 24px; text-align: center; }
        .cta-title { font-weight: 700; color: #fff; font-size: 18px; margin-bottom: 6px; }
        .cta-desc { color: #94a3b8; font-size: 13px; margin-bottom: 16px; }
        .reset-btn { width: 100%; margin-top: 20px; color: #64748b; background: none; border: none; cursor: pointer; font-size: 14px; padding: 12px; }
        .reset-btn:hover { color: #94a3b8; }
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <div class="container">
        <div id="screen-intro" class="text-center">
            <div class="badge"><span>‚úì</span> Free Assessment</div>
            <h1>Digital Transformation Readiness Assessment</h1>
            <p class="subtitle">Discover the right services to accelerate your enterprise evolution</p>
            <p class="desc">This 5-minute assessment will analyze your current state, identify gaps, and recommend tailored solutions across SAP, AI/ML, Development, and Risk & Compliance domains.</p>
            <div class="stats-grid">
                <div class="stat-box"><div class="stat-val">5</div><div class="stat-label">Minutes</div></div>
                <div class="stat-box"><div class="stat-val">8</div><div class="stat-label">Questions</div></div>
                <div class="stat-box"><div class="stat-val">‚àû</div><div class="stat-label">Insights</div></div>
            </div>
            <a href="https://luxury-lamington-69160b.netlify.app/" class="btn" style="display: inline-block; text-align: center; text-decoration: none;">Start S/4 HANA Migration Assessment ‚Üí</a>
        </div>
        <div id="screen-question" class="hidden">
            <div class="progress-wrap">
                <div class="progress-info"><span id="step-info">Step 1 of 8</span><span id="step-pct">12%</span></div>
                <div class="progress-bar"><div class="progress-fill" id="progress-fill" style="width: 12%"></div></div>
            </div>
            <h2 id="q-title"></h2>
            <p class="question-text" id="q-text"></p>
            <div id="q-options"></div>
            <div class="nav">
                <button class="btn-back" onclick="prevStep()">‚Üê Back</button>
                <button class="btn" onclick="nextStep()">Continue ‚Üí</button>
            </div>
        </div>
        <div id="screen-lead" class="hidden">
            <div class="form-box">
                <div class="form-icon">üìä</div>
                <h2 class="form-title">Your Results Are Ready!</h2>
                <p class="form-desc">Enter your details to view your personalized transformation roadmap</p>
                <form id="lead-form" onsubmit="submitLead(event)">
                    <div class="form-row">
                        <div><label class="form-label">First Name *</label><input class="form-input" id="fname" required placeholder="John"></div>
                        <div><label class="form-label">Last Name *</label><input class="form-input" id="lname" required placeholder="Smith"></div>
                    </div>
                    <div class="form-group"><label class="form-label">Work Email *</label><input class="form-input" type="email" id="email" required placeholder="john.smith@company.com"></div>
                    <div class="form-row">
                        <div><label class="form-label">Organization *</label><input class="form-input" id="company" required placeholder="Acme Corp"></div>
                        <div><label class="form-label">Role/Title</label><input class="form-input" id="role" placeholder="IT Director"></div>
                    </div>
                    <button type="submit" class="btn btn-block" id="submit-btn">View My Results ‚Üí</button>
                    <p class="secure-note">üîí Your information is secure. We never share your data.</p>
                </form>
            </div>
        </div>
        <div id="screen-results" class="hidden">
            <div class="text-center" style="margin-bottom: 24px;">
                <div class="badge badge-success">‚úì Assessment Complete</div>
                <h1 style="font-size: 24px;">Your Transformation Roadmap</h1>
            </div>
            <div class="results-box">
                <h3>Needs Analysis</h3>
                <div id="results-bars"></div>
            </div>
            <div class="metrics-grid" id="metrics-grid"></div>
            <h3>Recommended Services</h3>
            <div id="recommendations"></div>
            <div class="cta-box">
                <div class="cta-title">Ready to Begin?</div>
                <p class="cta-desc">Get your personalized S/4 HANA migration timeline and cost estimate.</p>
                <a href="https://luxury-lamington-69160b.netlify.app/" class="btn" style="display: inline-block; text-decoration: none;">Take S/4 HANA Migration Assessment ‚Üí</a>
                <a href="mailto:khaalis.wooden@visionblox.com?subject=Digital%20Transformation%20Assessment%20Follow-up" class="reset-btn" style="display: block; margin-top: 12px;">Schedule Consultation</a>
            </div>
            <button class="reset-btn" onclick="resetAssessment()">‚Üê Retake Assessment</button>
        </div>
    </div>
    <script>
var WEBHOOK_URL = 'https://script.google.com/macros/s/AKfycbzijvZInzi0SI21ZScj-THIbTNhAzN9rOKENCPjlKKLzVhtyXGfQC6Yqh6z98H9LjYZ/exec';
var questions = [
    { id: 'primary_need', title: 'Primary Business Driver', question: 'What is the primary catalyst for this initiative?', type: 'single', options: [
        { value: 'erp_modernization', label: 'ERP Modernization', desc: 'Legacy system replacement or upgrade', weights: { sap: 3, development: 1 } },
        { value: 'digital_transformation', label: 'Digital Transformation', desc: 'End-to-end process digitization', weights: { sap: 2, ai: 2, development: 2 } },
        { value: 'ai_automation', label: 'AI & Automation', desc: 'Intelligent process automation', weights: { ai: 3, development: 1 } },
        { value: 'compliance', label: 'Regulatory Compliance', desc: 'Meeting regulatory requirements', weights: { risk: 3, sap: 1 } },
        { value: 'security', label: 'Security Posture', desc: 'Strengthening cybersecurity', weights: { risk: 3, development: 1 } },
        { value: 'cloud_migration', label: 'Cloud Migration', desc: 'Moving to cloud infrastructure', weights: { development: 3, sap: 1 } }
    ]},
    { id: 'current_erp', title: 'Current ERP Landscape', question: 'What best describes your current ERP environment?', type: 'single', options: [
        { value: 'sap_ecc', label: 'SAP ECC', desc: 'Running SAP ECC 6.0 or earlier', weights: { sap: 3 } },
        { value: 'sap_s4', label: 'SAP S/4HANA', desc: 'Already on S/4HANA', weights: { sap: 2, ai: 1 } },
        { value: 'other_erp', label: 'Other ERP', desc: 'Oracle, Microsoft Dynamics, etc.', weights: { sap: 2, development: 2 } },
        { value: 'legacy', label: 'Legacy/Custom', desc: 'Custom-built or aging systems', weights: { development: 3, sap: 1 } },
        { value: 'none', label: 'No Central ERP', desc: 'Fragmented or no ERP', weights: { sap: 2, development: 2 } }
    ]},
    { id: 'pain_points', title: 'Critical Pain Points', question: 'Select all challenges currently impacting operations:', type: 'multi', options: [
        { value: 'manual_processes', label: 'Manual/Paper Processes', weights: { ai: 2, development: 1 } },
        { value: 'data_silos', label: 'Data Silos', weights: { sap: 2, ai: 1 } },
        { value: 'reporting', label: 'Reporting Delays', weights: { ai: 2, sap: 1 } },
        { value: 'compliance_gaps', label: 'Compliance Gaps', weights: { risk: 3 } },
        { value: 'security_incidents', label: 'Security Incidents', weights: { risk: 2, development: 1 } },
        { value: 'scalability', label: 'Scalability Issues', weights: { development: 2, sap: 1 } },
        { value: 'ux_issues', label: 'Poor User Experience', weights: { development: 2, sap: 1 } },
        { value: 'integration', label: 'Integration Challenges', weights: { sap: 2, development: 2 } }
    ]},
    { id: 'ai_readiness', title: 'AI/ML Maturity', question: 'Rate your organization AI/ML readiness:', type: 'slider', min: 1, max: 5, labels: ['No AI initiatives', 'Exploring/POC', 'Pilot projects', 'Production use cases', 'AI-native operations'] },
    { id: 'compliance_frameworks', title: 'Compliance Requirements', question: 'Which frameworks/regulations apply to your organization?', type: 'multi', options: [
        { value: 'fedramp', label: 'FedRAMP', weights: { risk: 2, development: 1 } },
        { value: 'nist', label: 'NIST CSF/800-53', weights: { risk: 2 } },
        { value: 'sox', label: 'SOX', weights: { risk: 2, sap: 1 } },
        { value: 'hipaa', label: 'HIPAA', weights: { risk: 2 } },
        { value: 'pci', label: 'PCI-DSS', weights: { risk: 2 } },
        { value: 'cmmc', label: 'CMMC', weights: { risk: 3 } },
        { value: 'iso27001', label: 'ISO 27001', weights: { risk: 2 } },
        { value: 'none', label: 'None/Unsure', weights: {} }
    ]},
    { id: 'user_count', title: 'Organization Scale', question: 'Approximate number of system users:', type: 'single', options: [
        { value: 'small', label: 'Under 500', weights: {} },
        { value: 'medium', label: '500 - 2,500', weights: {} },
        { value: 'large', label: '2,500 - 10,000', weights: {} },
        { value: 'enterprise', label: '10,000+', weights: {} }
    ]},
    { id: 'timeline', title: 'Project Timeline', question: 'Desired implementation timeline:', type: 'single', options: [
        { value: 'immediate', label: 'Immediate (< 3 months)', desc: 'Critical/urgent need' },
        { value: 'short', label: 'Short-term (3-6 months)', desc: 'Near-term priority' },
        { value: 'medium', label: 'Medium-term (6-12 months)', desc: 'Planned initiative' },
        { value: 'long', label: 'Long-term (12+ months)', desc: 'Strategic roadmap' }
    ]},
    { id: 'budget', title: 'Investment Range', question: 'Anticipated budget range for this initiative:', type: 'single', options: [
        { value: 'discovery', label: 'Discovery Phase', desc: '\$25K - \$75K' },
        { value: 'pilot', label: 'Pilot/POC', desc: '\$75K - \$250K' },
        { value: 'implementation', label: 'Full Implementation', desc: '\$250K - \$1M' },
        { value: 'enterprise', label: 'Enterprise Program', desc: '\$1M+' },
        { value: 'undetermined', label: 'To Be Determined', desc: 'Need guidance' }
    ]}
];
var services = {
    sap: [
        { name: 'S/4HANA Implementation', priority: 'high', description: 'Next-generation ERP transformation with in-memory computing and real-time analytics.' },
        { name: 'SAP Rise', priority: 'high', description: 'Business transformation as a service with SAP S/4HANA Cloud.' },
        { name: 'SAP BTP', priority: 'medium', description: 'Extend and innovate on SAP with the Business Technology Platform.' }
    ],
    ai: [
        { name: 'AI & ML Solutions', priority: 'high', description: 'Custom AI/ML model development, from strategy to production deployment.' },
        { name: 'AI Governance Services', priority: 'medium', description: 'Responsible AI implementation with governance frameworks.' }
    ],
    development: [
        { name: 'Cloud Technology', priority: 'high', description: 'AWS, Azure, GCP architecture, migration, and optimization.' },
        { name: 'Web Development', priority: 'medium', description: 'Custom applications with PHP, Python, .NET, and modern frameworks.' },
        { name: 'Cybersecurity', priority: 'high', description: 'Comprehensive security solutions including SIEM, IDS/IPS, and WAF.' }
    ],
    risk: [
        { name: 'Cybersecurity & Compliance Framework', priority: 'high', description: 'NIST, ISO 27001, SOC 2, FedRAMP compliance implementation.' },
        { name: 'Enterprise Risk Management', priority: 'high', description: 'Holistic risk governance with COSO ERM and ISO 31000.' },
        { name: 'Regulatory Compliance Services', priority: 'medium', description: 'Navigate complex regulatory requirements with GRC platforms.' }
    ]
};
var categoryInfo = {
    sap: { name: 'SAP Solutions', icon: 'üî∑', color: '#3b82f6' },
    ai: { name: 'AI & ML', icon: 'ü§ñ', color: '#8b5cf6' },
    development: { name: 'Development', icon: 'üíª', color: '#22c55e' },
    risk: { name: 'Risk & Compliance', icon: 'üõ°Ô∏è', color: '#f97316' }
};
var currentStep = 0;
var answers = {};
var calculatedResults = null;
function showScreen(id) {
    document.getElementById('screen-intro').classList.add('hidden');
    document.getElementById('screen-question').classList.add('hidden');
    document.getElementById('screen-lead').classList.add('hidden');
    document.getElementById('screen-results').classList.add('hidden');
    document.getElementById('screen-' + id).classList.remove('hidden');
}
function startAssessment() {
    currentStep = 0;
    answers = {};
    renderQuestion();
    showScreen('question');
}
function renderQuestion() {
    var q = questions[currentStep];
    var pct = Math.round(((currentStep + 1) / questions.length) * 100);
    document.getElementById('step-info').textContent = 'Step ' + (currentStep + 1) + ' of ' + questions.length;
    document.getElementById('step-pct').textContent = pct + '%';
    document.getElementById('progress-fill').style.width = pct + '%';
    document.getElementById('q-title').textContent = q.title;
    document.getElementById('q-text').textContent = q.question;
    var optionsHtml = '';
    if (q.type === 'single') {
        for (var i = 0; i < q.options.length; i++) {
            var opt = q.options[i];
            var selected = answers[q.id] === opt.value ? ' selected' : '';
            optionsHtml += '<div class="option' + selected + '" onclick="selectOption(\'' + q.id + '\', \'' + opt.value + '\')">';
            optionsHtml += '<div class="option-label">' + opt.label + '</div>';
            if (opt.desc) optionsHtml += '<div class="option-desc">' + opt.desc + '</div>';
            optionsHtml += '</div>';
        }
        document.getElementById('q-options').innerHTML = '<div class="options">' + optionsHtml + '</div>';
    } else if (q.type === 'multi') {
        var selected = answers[q.id] || [];
        for (var i = 0; i < q.options.length; i++) {
            var opt = q.options[i];
            var isSelected = selected.indexOf(opt.value) > -1 ? ' selected' : '';
            optionsHtml += '<div class="option' + isSelected + '" onclick="toggleMulti(\'' + q.id + '\', \'' + opt.value + '\')">';
            optionsHtml += '<div class="option-label">' + opt.label + '</div>';
            optionsHtml += '</div>';
        }
        document.getElementById('q-options').innerHTML = '<div class="multi-grid">' + optionsHtml + '</div>';
    } else if (q.type === 'slider') {
        var val = answers[q.id] || 3;
        optionsHtml = '<div class="slider-box">';
        optionsHtml += '<div class="slider-value" id="slider-val">' + val + '</div>';
        optionsHtml += '<div class="slider-label" id="slider-label">' + q.labels[val - 1] + '</div>';
        optionsHtml += '<input type="range" class="slider" id="slider-input" min="' + q.min + '" max="' + q.max + '" value="' + val + '" oninput="updateSlider(\'' + q.id + '\')">';
        optionsHtml += '<div class="slider-labels">';
        for (var i = 0; i < q.labels.length; i++) { optionsHtml += '<span>' + (i + 1) + '</span>'; }
        optionsHtml += '</div></div>';
        document.getElementById('q-options').innerHTML = optionsHtml;
    }
}
function selectOption(qid, val) { answers[qid] = val; renderQuestion(); }
function toggleMulti(qid, val) {
    var arr = answers[qid] || [];
    var idx = arr.indexOf(val);
    if (idx > -1) { arr.splice(idx, 1); } else { arr.push(val); }
    answers[qid] = arr;
    renderQuestion();
}
function updateSlider(qid) {
    var slider = document.getElementById('slider-input');
    var val = parseInt(slider.value);
    answers[qid] = val;
    document.getElementById('slider-val').textContent = val;
    var q = questions[currentStep];
    document.getElementById('slider-label').textContent = q.labels[val - 1];
}
function nextStep() {
    if (currentStep < questions.length - 1) { currentStep++; renderQuestion(); }
    else { showScreen('lead'); }
}
function prevStep() {
    if (currentStep > 0) { currentStep--; renderQuestion(); }
    else { showScreen('intro'); }
}
function calculateResults() {
    var scores = { sap: 0, ai: 0, development: 0, risk: 0 };
    for (var qid in answers) {
        var q = null;
        for (var i = 0; i < questions.length; i++) { if (questions[i].id === qid) { q = questions[i]; break; } }
        if (!q) continue;
        if (q.type === 'single') {
            for (var i = 0; i < q.options.length; i++) {
                if (q.options[i].value === answers[qid] && q.options[i].weights) {
                    for (var cat in q.options[i].weights) { scores[cat] = (scores[cat] || 0) + q.options[i].weights[cat]; }
                }
            }
        } else if (q.type === 'multi') {
            var arr = answers[qid] || [];
            for (var j = 0; j < arr.length; j++) {
                for (var i = 0; i < q.options.length; i++) {
                    if (q.options[i].value === arr[j] && q.options[i].weights) {
                        for (var cat in q.options[i].weights) { scores[cat] = (scores[cat] || 0) + q.options[i].weights[cat]; }
                    }
                }
            }
        } else if (q.type === 'slider') { scores.ai = (scores.ai || 0) + (6 - answers[qid]); }
    }
    var total = 0;
    for (var cat in scores) total += scores[cat];
    if (total === 0) total = 1;
    var percentages = {};
    for (var cat in scores) { percentages[cat] = Math.round((scores[cat] / total) * 100); }
    var ranked = [];
    for (var cat in scores) { ranked.push([cat, scores[cat]]); }
    ranked.sort(function(a, b) { return b[1] - a[1]; });
    var recommendations = [];
    for (var i = 0; i < ranked.length; i++) {
        var cat = ranked[i][0];
        var score = ranked[i][1];
        if (score > 2 && services[cat]) {
            for (var j = 0; j < services[cat].length; j++) {
                var svc = services[cat][j];
                if (svc.priority === 'high' || score > 5) {
                    recommendations.push({ name: svc.name, description: svc.description, priority: svc.priority, category: cat });
                }
            }
        }
    }
    var budget = answers.budget || 'discovery';
    var engagement = 'Discovery Workshop';
    var duration = '2-4 weeks';
    if (budget === 'pilot') { engagement = 'Pilot Implementation'; duration = '2-3 months'; }
    else if (budget === 'implementation') { engagement = 'Full Implementation'; duration = '4-9 months'; }
    else if (budget === 'enterprise') { engagement = 'Enterprise Program'; duration = '12-24 months'; }
    return { scores: scores, percentages: percentages, ranked: ranked, recommendations: recommendations.slice(0, 5), complexity: 'Moderate', engagement: engagement, duration: duration };
}
function submitLead(e) {
    e.preventDefault();
    var btn = document.getElementById('submit-btn');
    btn.disabled = true;
    btn.textContent = 'Processing...';
    calculatedResults = calculateResults();
    var webhookData = {
        name: document.getElementById('fname').value + ' ' + document.getElementById('lname').value,
        email: document.getElementById('email').value,
        company: document.getElementById('company').value,
        role: document.getElementById('role').value || 'Not specified',
        source: 'Digital Transformation Readiness Assessment',
        score: calculatedResults.ranked[0][0] + ': ' + calculatedResults.percentages[calculatedResults.ranked[0][0]] + '%',
        details: JSON.stringify({ answers: answers, scores: calculatedResults.scores, percentages: calculatedResults.percentages, complexity: calculatedResults.complexity, engagement: calculatedResults.engagement, duration: calculatedResults.duration, topRecommendations: calculatedResults.recommendations.slice(0, 3).map(function(r) { return r.name; }) })
    };
    fetch(WEBHOOK_URL, { method: 'POST', mode: 'no-cors', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(webhookData) }).then(function() { renderResults(); }).catch(function(err) { console.log('Webhook error:', err); renderResults(); });
}
function renderResults() {
    var results = calculatedResults;
    var barsHtml = '';
    for (var i = 0; i < results.ranked.length; i++) {
        var cat = results.ranked[i][0];
        var info = categoryInfo[cat];
        var pct = results.percentages[cat];
        barsHtml += '<div class="bar-wrap"><div class="bar-info"><span class="bar-name">' + info.icon + ' ' + info.name + '</span><span class="bar-pct">' + pct + '%</span></div><div class="bar-bg"><div class="bar-fill" style="width:' + pct + '%; background:' + info.color + '"></div></div></div>';
    }
    document.getElementById('results-bars').innerHTML = barsHtml;
    var metricsHtml = '<div class="metric-box"><div class="metric-label">Complexity</div><div class="metric-value" style="color:#facc15">' + results.complexity + '</div></div>';
    metricsHtml += '<div class="metric-box"><div class="metric-label">Engagement</div><div class="metric-value" style="color:#60a5fa">' + results.engagement + '</div></div>';
    metricsHtml += '<div class="metric-box"><div class="metric-label">Duration</div><div class="metric-value" style="color:#4ade80">' + results.duration + '</div></div>';
    document.getElementById('metrics-grid').innerHTML = metricsHtml;
    var recsHtml = '';
    for (var i = 0; i < results.recommendations.length; i++) {
        var rec = results.recommendations[i];
        var info = categoryInfo[rec.category];
        recsHtml += '<div class="rec-box"><div class="rec-header"><span>' + info.icon + '</span><span class="rec-name">' + rec.name + '</span>';
        if (rec.priority === 'high') recsHtml += '<span class="rec-badge">Primary</span>';
        recsHtml += '</div><p class="rec-desc">' + rec.description + '</p></div>';
    }
    document.getElementById('recommendations').innerHTML = recsHtml;
    showScreen('results');
}
function resetAssessment() {
    currentStep = 0;
    answers = {};
    calculatedResults = null;
    document.getElementById('lead-form').reset();
    document.getElementById('submit-btn').disabled = false;
    document.getElementById('submit-btn').textContent = 'View My Results ‚Üí';
    showScreen('intro');
}
    </script>
</body>
</html>
